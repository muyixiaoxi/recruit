import{_ as C,r as u,o as k,b as A,i as I,w as n,j as t,d as o,k as v,t as h,M,l as $,m as B,n as Q,E as R,q as P,s as V,p as j,h as z}from"./index-5439ded0.js";import{E as F,a as q}from"./el-tree-02565a85.js";import{E as H,a as L}from"./el-table-column-986c0875.js";import"./el-checkbox-9b10d3c1.js";import"./el-tag-5625fcd5.js";const f=p=>(j("data-v-a558dc3e"),p=p(),z(),p),O={style:{"background-color":"#fff"}},Y={class:"sessionName"},G={class:"place"},J=f(()=>o("text",null," 场次名称：",-1)),K={class:"place"},U=f(()=>o("text",null,"宣讲地点：",-1)),W={class:"sheet"},X=["src"],Z={__name:"Record",setup(p){const r=u([]),c=u([]),_=u(0),g=a=>{r.value=a.map(e=>e.ID),console.log(a,r.value,"val")},y={children:"children",label:"name",isLeaf:"leaf"},w=u([]),b=async(a,e)=>{if(console.log(a.level),a.level===0)return e([{id:3,name:"宣讲",type:""},{id:2,name:"面试",type:""}]);a.level===1&&(console.log(a.data.id,"node.id"),M(a.data.id).then(l=>{const i=l.data.map(d=>({...d,leaf:!0}));e(i)}))},x=async a=>{if(a.type!=""){const e=await $(a.id);console.log(e.data),e.data&&(_.value=1,e.data.Students.forEach(l=>{e.data.type=="interview"&&(_.value=2,l.TimeArrange.visit=l.TimeArrange.interview),l.TimeArrange.visit=T(l.TimeArrange.visit)})),c.value=e.data,e.data.Students.length==0&&(console.log("嘿嘿嘿"),await B(e.data.id))}},T=a=>{const e=new Date(a),l=e.getFullYear().toString().slice(2),i=("0"+(e.getMonth()+1)).slice(-2),d=("0"+e.getDate()).slice(-2),m=("0"+e.getHours()).slice(-2),s=("0"+e.getMinutes()).slice(-2);return"".concat(l,"-").concat(i,"-").concat(d," ").concat(m,":").concat(s)},E=async()=>{console.log(r.value,_.value,"数据"),await Q(r.value,_.value)};return k(()=>{}),(a,e)=>{const l=q,i=R,d=P,m=V,s=H,S=L,D=F;return A(),I(D,{class:"all"},{default:n(()=>[t(i,{span:4,class:"tree"},{default:n(()=>[o("div",O,[t(l,{data:w.value,props:y,style:{"font-size":"14px",margin:"0px",padding:"10px 15px"},load:b,lazy:"",onNodeClick:x},null,8,["data"])])]),_:1}),t(i,{span:20,class:"main-view"},{default:n(()=>[o("div",null,[o("div",Y,[o("span",G,[J,v(" "+h(c.value.Name?c.value.Name:"暂无"),1)]),o("span",K,[U,v(" "+h(c.value.place?c.value.place:"暂无"),1)]),o("div",null,[t(m,{title:"确认取消吗?",onConfirm:E},{reference:n(()=>[t(d,{type:"danger",disabled:r.value.length===0},{default:n(()=>[v(" 取消安排 ")]),_:1},8,["disabled"])]),_:1})])]),o("div",W,[t(S,{data:c.value.Students,stripe:"",style:{width:"100%"},onSelectionChange:g},{default:n(()=>[t(s,{type:"selection",width:"55",align:"center"}),t(s,{prop:"avatar",label:"头像",width:"120"},{default:n(N=>[o("div",null,[o("img",{src:N.row.avatar,alt:"",style:{width:"80px"}},null,8,X)])]),_:1}),t(s,{prop:"TimeArrange.visit",label:"宣讲时间",width:"180"}),t(s,{prop:"name",label:"姓名"}),t(s,{prop:"gender",label:"班级"}),t(s,{prop:"phone",label:"电话"}),t(s,{prop:"QQ",label:"QQ"})]),_:1},8,["data"])])])]),_:1})]),_:1})}}},se=C(Z,[["__scopeId","data-v-a558dc3e"]]);export{se as default};
