import{_ as M,r as d,o as S,b as o,c as l,d as e,F as f,f as m,j as g,w as y,aL as k,aA as L,t as i,k as w,aM as B,p as E,h as T}from"./index-5439ded0.js";import{E as V}from"./el-avatar-3a148cb1.js";const v=_=>(E("data-v-346a0f45"),_=_(),T(),_),N={class:"add"},b={class:"xtx-cart-page"},H={class:"container m-top-20"},z={class:"cart"},F=["onClick"],J={class:"tc message"},O={class:"title"},j=["innerHTML"],U={class:"tc"},Z={class:"title"},$=v(()=>e("span",null,"标题：",-1)),q={class:"content"},G=["innerHTML"],K=v(()=>e("div",null,"收件人",-1)),P=v(()=>e("div",null,"已读",-1)),Q={class:"read"},R={class:"oneself"},W=["src"],X=v(()=>e("div",null,"未读",-1)),Y={class:"read"},ee={class:"oneself"},te=["src"],se={__name:"outBox",setup(_){const p=d(!1),h=d([]),u=d({}),r=d({}),x=d([]),A=d([]),D=async a=>{let s=u.value.find(n=>n.ID===a.ID);const c=await B(s.ID);r.value=c.data,p.value=!0,x.value=r.value.Students.filter(n=>n.is_read===!0),A.value=r.value.Students.filter(n=>n.is_read===!1)},I=async()=>{const a=await k();u.value=a.data,u.value.forEach(s=>{if(s.CreatedAt!==null&&s.CreatedAt!=="0001-01-01T00:00:00Z"){const c=new Date(s.CreatedAt);s.CreatedAt=c.toLocaleString(void 0,{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric"})}else s.CreatedAt=""}),C()},C=()=>{h.value=JSON.parse(JSON.stringify(u.value)),h.value.forEach(a=>{a.content=a.content.replace(/<br\s*\/?>/g,"。 ").replace(/<[^>]+>/g,"")})};return S(()=>{I()}),(a,s)=>{const c=V,n=L;return o(),l("div",N,[e("div",b,[e("div",H,[e("div",z,[e("table",null,[e("tbody",null,[(o(!0),l(f,null,m(h.value,t=>(o(),l("tr",{key:t.ID,onClick:ae=>D(t)},[e("td",J,[e("div",O,i(t.title),1),e("div",{class:"content",innerHTML:t.content},null,8,j)]),e("td",U,i(t.CreatedAt),1)],8,F))),128))])])])])]),g(n,{modelValue:p.value,"onUpdate:modelValue":s[0]||(s[0]=t=>p.value=t),title:"通知详情","with-header":!0},{default:y(()=>[e("div",null,[e("div",Z,[$,e("span",null,i(r.value.title),1)]),e("div",q,[w(" 内容： "),e("span",{innerHTML:r.value.content},null,8,G)]),K,P,e("div",Q,[(o(!0),l(f,null,m(x.value,t=>(o(),l("div",{class:"demo-type",key:t.ID},[e("div",R,[e("div",null,[g(c,{size:45,src:t.avatar},{default:y(()=>[e("img",{src:t.avatar},null,8,W)]),_:2},1032,["src"])]),w(" "+i(t.name),1)])]))),128))]),X,e("div",Y,[(o(!0),l(f,null,m(A.value,t=>(o(),l("div",{class:"demo-type",key:t.ID},[e("div",ee,[e("div",null,[g(c,{size:45,src:t.avatar},{default:y(()=>[e("img",{src:t.avatar},null,8,te)]),_:2},1032,["src"])]),w(" "+i(t.name),1)])]))),128))])])]),_:1},8,["modelValue"])])}}},le=M(se,[["__scopeId","data-v-346a0f45"]]);export{le as default};
